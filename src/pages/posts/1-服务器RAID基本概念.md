---
date: 2020/07/23
---

<img src="https://data.skywangdev.com/blog/S-1.jpeg" width="800" />


> **随便记录一些技术，筛选后发布于此。**

## RAID基本概念

**RAID 的中文全称是 “独立磁盘冗余阵列” （Redundant Array of Independent Disks）。**  

独立硬盘冗余阵列（RAID, Redundant Array of Independent Disks），旧称廉价磁盘冗余阵列（Redundant Array of Inexpensive Disks），简称磁盘阵列。利用虚拟化存储技术把多个硬盘组合起来，成为一个或多个硬盘阵列组，目的为提升性能或资料冗余，或是两者同时提升。在运作中，取决于 RAID 层级不同，资料会以多种模式分散于各个硬盘，RAID 层级的命名会以 RAID 开头并带数字，例如：RAID 0、RAID 1、RAID 5、RAID 6、RAID 7、RAID 01、RAID 10、RAID 50、RAID 60。每种等级都有其理论上的优缺点，不同的等级在两个目标间获取平衡，分别是增加资料可靠性以及增加存储器（群）读写性能。
简单来说，RAID把多个硬盘组合成为一个逻辑硬盘，因此，操作系统只会把它当作一个实体硬盘。RAID常被用在服务器电脑上，并且常使用完全相同的硬盘作为组合。由于硬盘价格的不断下降与RAID功能更加有效地与主板集成，它也成为普通用户的一个选择，特别是需要大容量存储空间的工作，如：视频与音频制作。 ————*来源维基百科*

## 为什么要用RAID

使用RAID主要为了实现以下一个或多个目标：

1. 提升性能：让多块硬盘同时读写数据，速度远快于单块硬盘。
    - 就像让多个工人同时搬货，比一个人搬要快得多。
2. 增加容错/可靠性：通过数据冗余（备份或校验），即使其中一块硬盘突然损坏，数据也不会丢失，服务也不会中断。
   - 就像给重要文件做了复印备份，即使原件丢失，还有备份可用。
3. 扩大容量：将多块小容量硬盘合并成一个大的逻辑卷，方便管理和使用。
   - 就像把多个小房间的墙打通，变成一个大厅。

** 重要提示： RAID 不能替代 常规备份！它的主要作用是保证服务的连续性和数据的可用性。如果发生火灾、误删除、病毒入侵等情况，RAID里的数据一样会丢失。因此，必须坚持 “RAID + 定期备份” 的策略。**

## RAID级别所需硬盘数量的详细说明

1. RAID 0 (条带化)

最少硬盘数： 2块
说明： RAID 0 将数据分割成块，并交替写入所有硬盘。它不提供任何冗余或容错能力。任何一块硬盘损坏，所有数据都会丢失。
优点： 读写性能非常高（所有硬盘同时工作）。
缺点： 可靠性最低。硬盘数量越多，整体故障率越高。
常用场景： 对性能要求极高、且数据不重要或可临时性的场景，如图形渲染缓存、游戏存储盘。

2. RAID 1 (镜像)

最少硬盘数： 2块
说明： RAID 1 将完整的数据同时写入每一块硬盘，实现100%的镜像备份。
优点： 读取性能略有提升，写入性能与单盘相同。数据安全性高，只要不是所有硬盘同时损坏，数据就不会丢失。
缺点： 磁盘空间利用率低（只有50%），成本高。
常用场景： 对数据安全性要求极高的场景，如操作系统盘、重要数据库的日志文件。

3. RAID 5 (带奇偶校验的条带化)

最少硬盘数： 3块
说明： RAID 5 将数据和奇偶校验信息分布式地存储在所有硬盘上。它可以容忍任意一块硬盘的故障。实际可用容量为 (N-1) * 单盘容量。
优点： 在容量、性能和安全性之间取得了很好的平衡。空间利用率高于RAID 1。
缺点： 写入性能较差（需要计算奇偶校验）。一块硬盘失效后，重建阵列的过程压力很大，时间长，期间如果再坏一块盘，所有数据将丢失。
常用场景： 文件共享服务器、中小型数据库存储等应用广泛。

4. RAID 6 (带双重奇偶校验的条带化)

最少硬盘数： 4块
说明： RAID 6 与 RAID 5 类似，但使用两种不同的奇偶校验算法，因此可以同时容忍任意两块硬盘的故障。实际可用容量为 (N-2) * 单盘容量。
优点： 比RAID 5更高的安全性，尤其适用于大容量硬盘的阵列（重建时间长，双保险更安全）。
缺点： 写入性能比RAID 5更差（需要计算两次奇偶校验）。空间利用率更低。
常用场景： 使用大容量SATA硬盘的阵列、对数据安全性要求极高的归档存储。

5. RAID 10 (先镜像再条带化)

最少硬盘数： 4块（且必须是偶数）
说明： RAID 10 是 RAID 1 和 RAID 0 的结合。它首先将硬盘两两组成RAID 1镜像对，然后再将这些镜像对组成一个RAID 0条带卷。
优点： 同时兼具RAID 1的高安全性和RAID 0的高性能。重建速度比RAID 5/6快很多。
缺点： 成本最高，磁盘空间利用率只有50%。
常用场景： 对性能和可靠性都有极高要求的场景，如数据库服务器、虚拟化主机、高流量网站。
重要注意事项：

以上是最低要求。除了RAID 1，其他级别都可以使用多于最低要求的硬盘（例如，RAID 5 可以用4、5、6...块盘，RAID 10 可以用4、6、8...块盘）。
混合RAID：还有一些其他RAID级别（如RAID 50, RAID 60等）是上述基本级别的组合，需要更多硬盘。
热备盘：在实际的企业级部署中，通常会额外配置一块或多块热备盘。当阵列中的某块工作盘故障时，热备盘会自动顶替并开始重建数据，这个过程无需人工干预，进一步提高了系统的可用性。热备盘不参与日常的RAID运算，不计入以上最低数量要求。

## 常用场景举例：应该用哪个RAID

1. 操作系统 (OS) 驱动器和关键引导盘

  - 推荐：RAID 1
      - 原因： 操作系统盘通常不需要巨大容量，但对可用性和可靠性要求极高。RAID 1提供了最好的保护，一块硬盘故障时系统能毫无感觉地继续运行，方便更换硬盘重建。读取性能也有提升，对系统启动和运行有帮助。

2. 文件存储服务器 (File Server) / NAS

- 中小型、预算敏感： 推荐 RAID 5
  - 原因： 在容量利用率和安全性之间取得了完美平衡。对于存放文档、图片等一般文件的服务器来说，性价比最高。
- 大型、使用大容量硬盘（如>4TB）： 强烈推荐 RAID 6
    - 原因： 大容量硬盘重建时间非常长（可能超过24小时），在此期间再坏第二块盘的风险不容忽视。RAID 6的双重校验提供了关键的安全保障。

3. 视频编辑 / 媒体制作

- 原始素材存储： 推荐RAID 5/6
  - RAID 5/6： 更安全的选择，在提供足够带宽的同时保证了数据安全。
成品归档： 推荐 RAID 6
数据很重要且体积巨大，需要长期安全保存，RAID 6是最佳选择。

> 重要的事情说三遍：RAID不是备份！RAID不是备份！RAID不是备份！ 无论你用多安全的RAID，都必须有定期备份到其他介质（如磁带、异地NAS、云存储）的策略。